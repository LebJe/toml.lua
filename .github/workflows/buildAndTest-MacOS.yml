name: "Build and Test on MacOS"
on: ["push", "pull_request"]

jobs:
    RunTestsOnMac:
        name: "MacOS (Latest)"
        runs-on: "macos-latest"
        strategy:
            matrix:
                lua: ["lua", "luajit"]
        steps:
            - uses: "actions/checkout@v3"
            - name: "Install Dependencies"
              run: |
                  brew install ${{ matrix.lua }} luarocks
                  luarocks install busted
            - name: "Build Project"
              run: "luarocks make"
            - name: "Test Project"
              run: "busted"
